<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0;" />
<title>电影选购</title>
<link
	href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />
<link href="css/style.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/phone.js"></script>
<script type="text/javascript" src="js/TouchSlide.1.1.js"></script>
<script type="text/javascript" src="js/movie.js"></script>
<script src="js/vue.js"></script>
<script src="js/axios.min.js" type="text/javascript"></script>

</head>

<body>
	<div class="whole">
		<!--头部轮播-->
		<div id="carousel" class="carousel">
			<div class="hd">
				<ul></ul>
			</div>
			<div class="bd">
				<ul>
					<li><a href="details.html"><img _src="image/lunbo.jpg"
							src="image/blank.png" /></a></li>
					<li><a href="details.html"><img _src="image/lunbo1.jpg"
							src="image/blank.png" /></a></li>
				</ul>
			</div>
			<div class="search sear-show">
				<img src="image/search.png" />
			</div>
			<div class="search-new">
				<input type="text" value="" placeholder="请输入您要搜索的内容" />
				<div class="sear">
					<img src="image/search.png" />
				</div>
				<div class="close">
					<i class="fa fa-forward"></i>
				</div>
			</div>
		</div>
		<!--头部轮播END-->

		<div class="movie" id="allmovies">
			<ul v-for="(movie,index) in data" :key="index">
				<li><a href="javascript:void(0)" @click="findById(movie.f_id)">
						<span class="tag">9.1</span>
						<div class="posters">
							<img :src="movie.f_picture" />
						</div>
						<div class="post-content">
							<div class="left-con">
								<p class="tit">
									<small>{{movie.f_name}}</small> <span> <i>{{movie.f_dimension}}</i>
										<i>IMAX</i>
									</span>
								</p>
								<p class="eng">
									主演：<span>{{movie.f_performer}}</span>
								</p>
								<p class="act">{{movieType[index]}}</p>
								<p class="tim">
									上映时间<span>{{movie.f_runtime}}</span>
								</p>
							</div>
							<div class="right-btn" v-if="movie.f_flag==1">
								<div class="ticket-btn">购票</div>
							</div>
							<div class="right-btn" v-else-if="movie.f_flag==2">
								<div class="ticket-btn presell">预售</div>
							</div>

						</div>
				</a></li>

			</ul>
		</div>

	</div>
	<script type="text/javascript">
	TouchSlide({ 
		slideCell:"#carousel",
		titCell:".hd ul", //开启自动分页 autoPage:true ，此时设置 titCell 为导航元素包裹层
		mainCell:".bd ul", 
		effect:"left", 
		autoPlay:true,//自动播放
		autoPage:true, //自动分页
		switchLoad:"_src" //切换加载，真实图片路径为"_src" 
	});
	
	var vm=new Vue({
		el:"#allmovies",
		data:{
			data:[],
			movieType:[]
		},
		created() {
			axios.get("/allmovies")
			.then(res=>{
				console.info(res.data);
				var movies=res.data;
				var type=[];
				for(var i=0;i<movies.length;i++){
					type.push(movies[i].filmType.t_name);
				}
				this.data=movies;
				this.movieType=type;
				
			})
			.catch(res=>{
				console.info(res);
			});
		},
		methods:{
			findById:function(movieid){
				window.location.href="details.html?movieId="+movieid;
			}
		}
	})
	
</script>

</body>
</html>
